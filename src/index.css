@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom scrollbar for lyrics container */
.lyrics-container::-webkit-scrollbar {
  width: 8px;
}

.lyrics-container::-webkit-scrollbar-track {
  background: rgba(226, 232, 240, 0.3);
  border-radius: 4px;
}

.lyrics-container::-webkit-scrollbar-thumb {
  background: rgba(59, 130, 246, 0.6);
  border-radius: 4px;
}

.lyrics-container::-webkit-scrollbar-thumb:hover {
  background: rgba(59, 130, 246, 0.8);
}

/* StoryWorlds Design System - All colors, gradients, fonts, etc defined here. 
All colors MUST be HSL.
*/

@layer base {
  /* Reader Background Theme Variables */
  :root {
    --reader-bg-theme: warm; /* warm | cool */
    
    /* Warm Parchment Theme */
    --reader-bg-warm-base: #FAF7F0;
    --reader-bg-warm-edge: #F1ECE3;
    
    /* Cool Mist Theme */
    --reader-bg-cool-base: #F3F7FB;
    --reader-bg-cool-edge: #EAF1F8;
    
    --background: 0 0% 100%;
    --foreground: 217 32% 6%;

    --card: 0 0% 100%;
    --card-foreground: 217 32% 6%;

    --popover: 0 0% 100%;
    --popover-foreground: 217 32% 6%;

    /* Brand Colors */
    --indigo: 239 68% 68%;
    --indigo-600: 239 84% 67%;
    --indigo-700: 239 84% 60%;
    --green: 142 71% 45%;
    --slate: 215 25% 27%;
    --slate-100: 210 40% 96%;
    --slate-200: 214 32% 91%;
    --slate-700: 215 25% 27%;
    --amber: 45 93% 47%;
    --ink: 222 84% 5%;
    --white: 0 0% 100%;

    --primary: 239 84% 67%;
    --primary-foreground: 0 0% 100%;

    --secondary: 210 40% 96%;
    --secondary-foreground: 217 32% 6%;

    --muted: 210 40% 96%;
    --muted-foreground: 215 25% 27%;

    --accent: 210 40% 96%;
    --accent-foreground: 217 32% 6%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;

    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 239 84% 67%;

    --radius: 1.5rem;

    /* Hero gradient */
    --hero-gradient: linear-gradient(135deg, hsl(255 85% 88%), hsl(245 85% 88%));
    
    /* Shadows */
    --elevation-soft: 0 8px 24px rgba(0, 0, 0, 0.08);
    --elevation-hover: 0 12px 32px rgba(0, 0, 0, 0.12);

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  }

  /* Paper grain texture utility */
  .paper {
    background-image: 
      radial-gradient(circle at 20% 30%, rgba(0, 0, 0, 0.02) 1px, transparent 1px),
      radial-gradient(circle at 80% 70%, rgba(0, 0, 0, 0.015) 1px, transparent 1px),
      radial-gradient(circle at 40% 80%, rgba(0, 0, 0, 0.01) 1px, transparent 1px);
    background-size: 100px 100px, 150px 150px, 200px 200px;
  }

  /* Typography Scale */
  .text-headline {
    font-size: 32px;
    line-height: 40px;
    font-weight: 600;
    color: hsl(var(--ink));
  }

  .text-title {
    font-size: 24px;
    line-height: 32px;
    font-weight: 600;
  }

  .text-body {
    font-size: 17px;
    line-height: 26px;
  }

  .text-chip {
    font-size: 14px;
    line-height: 20px;
    font-weight: 600;
  }
}

@layer components {
  /* Hero section with fantasy gradient and stars */
  .hero-bg {
    background: var(--hero-gradient);
    position: relative;
    overflow: hidden;
  }

  .hero-bg::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: 
      radial-gradient(circle at 25% 25%, white 2px, transparent 2px),
      radial-gradient(circle at 75% 75%, white 1px, transparent 1px),
      radial-gradient(circle at 50% 20%, white 1.5px, transparent 1.5px),
      radial-gradient(circle at 80% 40%, white 1px, transparent 1px);
    background-size: 200px 200px, 300px 300px, 250px 250px, 180px 180px;
    opacity: 0.6;
  }

  .hero-bg::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at center, transparent 20%, rgba(0, 0, 0, 0.1));
  }

  /* Smooth transitions */
  .transition-smooth {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Card hover effects */
  .story-card {
    transition: all 0.2s ease-out;
  }

  .story-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--elevation-hover);
  }

  .story-card:hover .story-cover {
    transform: scale(1.03);
  }

  .story-cover {
    transition: transform 0.2s ease-out;
  }

  /* Focus rings */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2;
  }

  /* Reader Background Styles */
  .reader-root {
    /* Base background with theme-aware gradient */
    background: 
      /* Paper grain noise overlay (2% opacity) */
      url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='1' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.02'/%3E%3C/svg%3E"),
      /* Theme-aware radial gradient */
      radial-gradient(
        ellipse 1000px 800px at center 35%,
        var(--reader-bg-base) 0%,
        var(--reader-bg-edge) 100%
      );
    
    /* Set theme-specific colors */
    --reader-bg-base: var(--reader-bg-warm-base);
    --reader-bg-edge: var(--reader-bg-warm-edge);
  }

  /* Cool theme variant */
  .reader-root[style*="--reader-bg-theme: cool"] {
    --reader-bg-base: var(--reader-bg-cool-base);
    --reader-bg-edge: var(--reader-bg-cool-edge);
  }

  /* Ensure text contrast on reader background */
  .reader-root {
    color: #2d3748; /* Dark gray for WCAG AA compliance */
  }

  /* Preserve white page cards and their shadows */
  .reader-root .spread-container {
    /* Ensure page cards remain pure white with existing shadows */
    background: transparent;
  }

  .reader-root .right-page-front,
  .reader-root .right-page-back {
    /* Keep page backgrounds pure white */
    background: 
      linear-gradient(135deg, #fafaf7 0%, #f8f8f5 100%),
      url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23f0f0f0' fill-opacity='0.3'%3E%3Ccircle cx='7' cy='7' r='1'/%3E%3Ccircle cx='27' cy='27' r='1'/%3E%3Ccircle cx='47' cy='47' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") !important;
  }

  .reader-root .left-page {
    /* Keep illustration page background dark for contrast */
    background: #1a1a1a !important;
  }
}
